#!/usr/bin/env python3

from datetime import date
from os import environ
from pathlib import Path
from shutil import make_archive


def main():
    if not environ.get("DROPBOX"):
        raise ValueError("Define $DROPBOX in env")

    backup_folder = Path(environ["DROPBOX"], "Apps", "Kobo")

    destination = Path(backup_folder, f"{date.today().isoformat()} - Full Backup")

    make_archive(str(destination), "zip", str(Path("/Volumes", "KOBOeReader")))
    print("Done! Created", destination)


if __name__ == "__main__":
    main()
